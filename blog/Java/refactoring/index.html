
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Refactoring - Living life and make it better</title>
  <meta name="author" content="Endy Muhardin">

  
  <meta name="description" content="Three times and you refactor !! Begitu kata Martin Fowler dalam bukunya Refactoring. Sering terjadi dalam pembuatan aplikasi, kita akan menulis suatu &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://endymuhardin.github.com/blog/Java/refactoring/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Living life and make it better" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">endymuhardin</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">Living life and make it better</a></h1>
  
    <h2>life, learn, contribute</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:endymuhardin.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
        <h1 class="entry-title">Refactoring</h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2005-11-28T18:55:21+07:00" pubdate data-updated="true">Nov 28<span>th</span>, 2005</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Three times and you refactor !! Begitu kata Martin Fowler dalam bukunya Refactoring.</p>

<p>Sering terjadi dalam pembuatan aplikasi, kita akan menulis suatu rutin yang sudah pernah kita tulis sebelumnya, dengan sedikit perbedaan parameter dan variabel.
Biasanya, kalau menemui hal seperti ini, kita akan copy-paste dari kode yang sudah ada, melakukan sedikit modifikasi, dan selesai. Mudah dan sederhana, tapi terlalu rajin. Untuk jadi programmer yang efektif, kita perlu memiliki sifat malas.</p>

<p>Misalnya, kita punya UserDao, dengan kode seperti ini :</p>

<pre><code>&lt;code&gt;public class UserDao {
    public void insert(User u) {
      // connect dulu
      Connection conn = DriverManager.getConnection(url, user, pass);
      PreparedStatement ps = conn.prepareStatement("INSERT INTO tbl_user VALUES (?,?)");

      // ... dan seterusnya .... 
    }
}
&lt;/code&gt;
</code></pre>

<p>Setelah itu, kita akan menambahkan method untuk delete:</p>

<pre><code>&lt;code&gt;public class UserDao {
    public void insert(User u) {
        // connect dulu
        Connection conn = DriverManager.getConnection(url, user, pass);
        PreparedStatement ps = conn.prepareStatement("INSERT INTO tbl_user VALUES (?,?)");

        // ... dan seterusnya .... 
    }

    public void delete (User u) {
        // connect dulu
        Connection conn = DriverManager.getConnection(url, user, pass);
        PreparedStatement ps = conn.prepareStatement("DELETE FROM  tbl_user WHERE id=?");

        // ... dan seterusnya .... 
    }
}
&lt;/code&gt;
</code></pre>

<p>Nah, sekarang kita mau tambah method untuk search user berdasarkan id, tentunya kita akan tulis kode seperti ini :</p>

<pre><code>&lt;code&gt;public class UserDao {
    public void insert(User u) {
        // connect dulu
        Connection conn = DriverManager.getConnection(url, user, pass);
        PreparedStatement ps = conn.prepareStatement("INSERT INTO tbl_user VALUES (?,?)");

        // ... dan seterusnya .... 
    }

    public void delete (User u) {
        // connect dulu
        Connection conn = DriverManager.getConnection(url, user, pass);
        PreparedStatement ps = conn.prepareStatement("DELETE FROM  tbl_user WHERE id=?");

        // ... dan seterusnya .... 
    }

    public User search (int id) {
        // connect dulu
        Connection conn = DriverManager.getConnection(url, user, pass);
        PreparedStatement ps = conn.prepareStatement("SELECT * FROM  tbl_user WHERE id=?");

        // ... dan seterusnya .... 
    }
}
&lt;/code&gt;
</code></pre>

<p>Stop !!!
Three times and you refactor. Artinya, begitu kita paste untuk kedua kali (berarti ada tiga kopi blok yang sama), itulah waktunya kita refactor.
Kita paste blok tersebut, masukkan ke dalam function/method sendiri, berikan parameter seperlunya. Ini untuk menghindari terjadinya duplikasi kode, sehingga untuk tiap perintah cuma ada satu versi.</p>

<p>Setelah direfactor, kode di atas menjadi :</p>

<pre><code>&lt;code&gt;public class UserDao {
    public PreparedStatement prepareStatement(String sql) {
        // connect dulu
        Connection conn = DriverManager.getConnection(url, user, pass);
        return conn.prepareStatement(sql);              
    }

    public void insert(User u) {
        PreparedStatement ps = prepareStatement("INSERT INTO tbl_user VALUES (?,?)");
        // ... dan seterusnya .... 
    }

    public void delete (User u) {
        PreparedStatement ps = prepareStatement("DELETE FROM tbl_user WHERE id=?");      
        // ... dan seterusnya .... 
    }

    public User search (int id) {
        PreparedStatement ps = prepareStatement("SELECT * FROM tbl_user WHERE id=?");
        // ... dan seterusnya .... 
    }
}
&lt;/code&gt;
</code></pre>

<p>Apabila kita menggunakan IDE canggih seperti Eclipse, IDEA, atau Netbeans, refactoring ini mudah saja dilakukan. Tinggal blok kode yang akan direfactor, kemudian klik kanan, dan pilih Extract Method. Method baru akan dibuatkan dan diisi dengan kode yang kita blok. Sedangkan kode asal yang kita blok sebelumnya akan diganti dengan pemanggilan method baru.</p>

<p>Extract Method hanya satu contoh kecil saja dari Refactoring. Masih ada Extract Classes, Inline Method, dan lain sebagainya. Buku wajib buat programmer Java.</p>

<p>Silahkan <a href="http://www.amazon.com/gp/product/0201485672/002-3388109-5046409?v=glance&amp;n=283155&amp;n=507846&amp;s=books&amp;v=glance">beli di Amazon</a> atau <a href="http://www.flazx.com/ebook790.php">download di Flazx</a>.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Endy Muhardin</span></span>

      








  


<time datetime="2005-11-28T18:55:21+07:00" pubdate data-updated="true">Nov 28<span>th</span>, 2005</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/java/'>Java</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://endymuhardin.github.com/blog/Java/refactoring/" data-via="endymuhardin" data-counturl="http://endymuhardin.github.com/blog/Java/refactoring/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left articlenav" href="/blog/Life/deadline/" title="Previous Post: Deadline !!!">&laquo; Deadline !!!</a>
      
      
        <a class="basic-alignment right articlenav" href="/blog/Life/geek-personality-quiz/" title="Next Post: Geek Personality Quiz">Geek Personality Quiz &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/Java/konsep-dasar-log4/">Konsep Dasar Log4j</a>
      </li>
    
      <li class="post">
        <a href="/blog/Java/monitoring-aplikasi-java/">Monitoring Aplikasi Java</a>
      </li>
    
      <li class="post">
        <a href="/blog/Linux/backup-home-folder/">Backup Home Folder</a>
      </li>
    
      <li class="post">
        <a href="/blog/Java/Manajemen/staged-deployment/">Staged Deployment</a>
      </li>
    
      <li class="post">
        <a href="/blog/Manajemen/meluruskan-mitos-cmmi/">Meluruskan Mitos CMMI</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/endymuhardin">@endymuhardin</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'endymuhardin',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("endymuhardin", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/endymuhardin" class="twitter-follow-button" data-show-count="false">Follow @endymuhardin</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Endy Muhardin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
