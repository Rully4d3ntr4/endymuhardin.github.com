
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Intro JMS - Living life and make it better</title>
  <meta name="author" content="Endy Muhardin">

  
  <meta name="description" content="Pada artikel ini, kita akan coba buat demo penggunaan JMS menggunakan Spring Framework dan ActiveMQ. Spring Framework 2.0 telah dilengkapi dengan &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://endymuhardin.github.com/blog/Java/intro-jms/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Living life and make it better" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<meta property="fb:app_id" content="269506799827290" />


  

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">endymuhardin</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">Living life and make it better</a></h1>
  
    <h2>life, learn, contribute</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:endymuhardin.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
        <h1 class="entry-title">Intro JMS</h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2007-01-18T20:19:14+07:00" pubdate data-updated="true">Jan 18<span>th</span>, 2007</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Pada artikel ini, kita akan coba buat demo penggunaan JMS menggunakan <a href="http://www.springframework.org">Spring Framework</a> dan <a href="http://incubator.apache.org/activemq">ActiveMQ</a>. Spring Framework 2.0 telah dilengkapi dengan helper class untuk memudahkan kita menggunakan JMS (Java Messaging Service). Sayangnya dokumentasi di Spring Reference kurang lengkap, sehingga ada beberapa bagian yang harus kita cari sendiri.</p>

<p>Jangan khawatir, bagian yang kurang tersebut bisa dibaca di artikel ini.</p>

<p>Berikut skenario yang ingin saya buat:</p>

<ol>
<li><p>Jalankan JMS server (kali ini saya gunakan ActiveMQ)</p></li>
<li><p>Siapkan <em>MessageListener</em>, yang akan bereaksi bila menerima pesan pada destination tertentu</p></li>
<li><p>Kirim beberapa pesan ke destination yang didengarkan oleh <em>MessageListener</em></p></li>
<li><p>Pastikan pesan tersebut diterima dengan baik</p></li>
</ol>


<p>Kita akan buat kasus sederhana saja, melibatkan tiga class:</p>

<ul>
<li><p>Sender.java : pengirim pesan</p></li>
<li><p>Receiver.java : penerima pesan (MessageListener)</p></li>
<li><p>Main.java : class untuk menjalankan pengirim dan penerima</p></li>
</ul>


<p>Berikut adalah kode programnya.</p>

<h3>Sender.java</h3>

<pre><code>&lt;code&gt;
package tutorial.spring.jms;

import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.Session;
import org.springframework.jms.core.JmsTemplate;
import org.springframework.jms.core.MessageCreator;

public class Sender {
    private String message = "default message";
    private JmsTemplate jmsTemplate;

    public void setJmsTemplate(JmsTemplate jmsTemplate) {
        this.jmsTemplate = jmsTemplate;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public void send() {
        jmsTemplate.send(new MessageCreator(){
            public Message createMessage(Session sess) throws JMSException {
                return sess.createTextMessage(message);
            }           
        });
    }
}
&lt;/code&gt;
</code></pre>

<h3>Receiver.java</h3>

<pre><code>&lt;code&gt;
package tutorial.spring.jms;

import javax.jms.JMSException;

public class Receiver implements MessageListener {

    public void onMessage(Message msg){
        if (msg instanceof TextMessage) {
            TextMessage txtMsg = (TextMessage) msg;
            try {
                System.out.println(txtMsg.getText());
            } catch (JMSException e) {
                e.printStackTrace();
            }
        } else {
            System.out.println("Unsupported message type : "+msg.getClass());
        }
    }   
}
&lt;/code&gt;
</code></pre>

<h3>Main.java</h3>

<pre><code>&lt;code&gt;
package tutorial.spring.jms;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Main {
    public static void main(String[] args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("jms-ctx.xml");
        Sender sender = (Sender) ctx.getBean("sender");

        sender.setMessage("Percobaan menggunakan JMS dengan Spring. ");     
        sender.send();

        sender.setMessage("Pesan ini seharusnya diterima oleh Message Driven POJO");
        sender.send();
    }
}
&lt;/code&gt;
</code></pre>

<p>Integrasi antara kode Java dan ActiveMQ diatur di konfigurasi Spring, jms-ctx.xml. Berikut kodenya.</p>

<h3>jms-ctx.xml</h3>

<pre><code>&lt;code&gt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd"&gt;
&lt;beans&gt;

    &lt;bean id="messageListener" class="tutorial.spring.jms.Receiver" /&gt;
    &lt;bean id="listenerContainer" class="org.springframework.jms.listener.SimpleMessageListenerContainer"&gt;
        &lt;property name="connectionFactory" ref="jmsConnectionFactory"/&gt;
        &lt;property name="destinationName" value="TEST.FOO"/&gt;
        &lt;property name="messageListener" ref="messageListener"/&gt;
    &lt;/bean&gt;

    &lt;bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory"&gt;
        &lt;constructor-arg index="0"&gt;&lt;null/&gt;&lt;/constructor-arg&gt;
        &lt;constructor-arg index="1"&gt;&lt;null/&gt;&lt;/constructor-arg&gt;
        &lt;constructor-arg index="2" value="tcp://localhost:61616"&gt;&lt;/constructor-arg&gt;
    &lt;/bean&gt; 

    &lt;bean id="sender" class="tutorial.spring.jms.Sender"&gt;
        &lt;property name="jmsTemplate" ref="jmsTemplate"/&gt;        
    &lt;/bean&gt;

    &lt;bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate"&gt;
        &lt;property name="connectionFactory" ref="jmsConnectionFactory"/&gt;
        &lt;property name="defaultDestinationName" value="TEST.FOO"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
&lt;/code&gt;
</code></pre>

<p>Apabila kita ingin menggunakan JMS server yang lain (selain ActiveMQ), cukup ganti deklarasi <em>jmsConnectionFactory</em> pada <em>jms-ctx.xml</em> di atas. Destination name juga di-hard code dengan nilai <em>TEST.FOO</em>. Nantinya pada aplikasi nyata, nilai ini mungkin ingin kita konfigurasi lebih jauh, atau diparameterisasi dalam database.</p>

<p>ActiveMQ mendukung <em>dynamic destination creation</em>, artinya destination <em>TEST.FOO</em> akan dibuatkan bila belum ada. Pada aplikasi server JMS yang lain, mungkin kita harus membuat <em>TEST.FOO</em> secara manual di server tersebut.</p>

<p>Selamat mencoba, semoga sukses.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Endy Muhardin</span></span>

      








  


<time datetime="2007-01-18T20:19:14+07:00" pubdate data-updated="true">Jan 18<span>th</span>, 2007</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/java/'>Java</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://endymuhardin.github.com/blog/Java/intro-jms/" data-via="endymuhardin" data-counturl="http://endymuhardin.github.com/blog/Java/intro-jms/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left articlenav" href="/blog/Lain2/google-endy/" title="Previous Post: Google "endy"">&laquo; Google "endy"</a>
      
      
        <a class="basic-alignment right articlenav" href="/blog/Java/presentasi-ruthless-testing/" title="Next Post: Presentasi Ruthless Testing">Presentasi Ruthless Testing &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="facebook_comments" aria-live="polite">
      <noscript>Please enable JavaScript to view the comments powered by facebook</a></noscript>
<div
  class="fb-comments"
  data-href="http://endymuhardin.github.com/blog/Java/intro-jms/"
  data-num-posts="2"
  data-width="470"
  data-colorscheme="light" ></div>

    </div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/Java/konsep-dasar-log4/">Konsep Dasar Log4j</a>
      </li>
    
      <li class="post">
        <a href="/blog/Java/monitoring-aplikasi-java/">Monitoring Aplikasi Java</a>
      </li>
    
      <li class="post">
        <a href="/blog/Linux/backup-home-folder/">Backup Home Folder</a>
      </li>
    
      <li class="post">
        <a href="/blog/Java/Manajemen/staged-deployment/">Staged Deployment</a>
      </li>
    
      <li class="post">
        <a href="/blog/Manajemen/meluruskan-mitos-cmmi/">Meluruskan Mitos CMMI</a>
      </li>
    
      <li class="post">
        <a href="/blog/Aplikasi/Linux/redmine-jruby-tomca/">Instalasi Redmine di Tomcat</a>
      </li>
    
      <li class="post">
        <a href="/blog/Aplikasi/Programming/instalasi-spket-ide/">Instalasi Spket IDE</a>
      </li>
    
      <li class="post">
        <a href="/blog/Aplikasi/Linux/membuat-screencast/">Membuat Screencast</a>
      </li>
    
      <li class="post">
        <a href="/blog/Java/PHP/tutorial-extjs/">Tutorial ExtJS</a>
      </li>
    
      <li class="post">
        <a href="/blog/Manajemen/estimasi-proyek-software/">Estimasi Proyek Software</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/endymuhardin">@endymuhardin</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'endymuhardin',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("endymuhardin", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/endymuhardin" class="twitter-follow-button" data-show-count="false">Follow @endymuhardin</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/110971146012275775230?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Endy Muhardin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=269506799827290&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
